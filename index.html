<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COVID-19 Statistics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>
<body class="purple lighten-4">
    <div class="container">
        <h1 class="red-text darken-2">COVID-19 Statistics</h1>
        <div class="card-panel cyan accent-1">
            <h2>Global Cases</h2>
            <p class="flow-text">Total Confirmed: <span id="globalConfirmed"></span></p>
            <p class="flow-text">Total Deaths: <span id="globalDeaths"></span></p>
            <p class="flow-text">Total Recovered: <span id="globalRecovered"></span></p>
            <button type="button" onclick="fetchCoronaGlobal()" class="waves-effect waves-light btn-small purple">Check Now</button>
        </div>
        <div class="card-panel cyan accent-1">
            <h1>India Cases</h1>
            <p class="flow-text">Total Confirmed: <span id="indiaConfirmed"></span></p>
            <p class="flow-text">Total Deaths: <span id="indiaDeaths"></span></p>
            <p class="flow-text">Total Recovered: <span id="indiaRecovered"></span></p>
            <button type="button" onclick="fetchCoronaIndia()" class="waves-effect waves-light btn-small purple">Check Now</button>
        </div>
        <div class="card-panel cyan accent-1">
            <h1>Bihar Cases</h1>
            <p class="flow-text">Total Confirmed: <span id="biharConfirmed"></span></p>
            <p class="flow-text">Total Deaths: <span id="biharDeaths"></span></p>
            <p class="flow-text">Total Recovered: <span id="biharRecovered"></span></p>
            <button type="button" onclick="fetchCoronaBihar()" class="waves-effect waves-light btn-small purple">Check Now</button>
        </div>
        <div class="card-panel cyan accent-1">
            <h1>Rohtas Cases</h1>
            <p class="flow-text">Total Confirmed: <span id="rohtasConfirmed"></span></p>
            <p class="flow-text">Total Deaths: <span id="rohtasDeaths"></span></p>
            <p class="flow-text">Total Recovered: <span id="rohtasRecovered"></span></p>
            <button type="button" onclick="fetchCoronaRohtas()" class="waves-effect waves-light btn-small purple">Check Now</button>
        </div>
        <p>Made with Fetch API.</p>
        <p>Developed by Shivank Sriraj.</p>
        <hr>
        <p><span id="time"></span></p>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        async function fetchCoronaGlobal() {
            let fetchString = await fetch("https://corona-virus-stats.herokuapp.com/api/v1/cases/general-stats");
            let fetchData = await fetchString.json();
            document.getElementById("globalConfirmed").innerHTML = fetchData.data.total_cases;
            document.getElementById("globalDeaths").innerHTML = fetchData.data.death_cases;
            document.getElementById("globalRecovered").innerHTML = fetchData.data.recovery_cases;
        }
        async function fetchCoronaIndia() {
            let fetchString = await fetch("https://api.rootnet.in/covid19-in/stats/latest");
            let fetchData = await fetchString.json();
            document.getElementById("indiaConfirmed").innerHTML = fetchData.data.summary.total;
            document.getElementById("indiaDeaths").innerHTML = fetchData.data.summary.deaths;
            document.getElementById("indiaRecovered").innerHTML = fetchData.data.summary.discharged;
        }
        async function fetchCoronaBihar() {
            let fetchString = await fetch("https://api.rootnet.in/covid19-in/stats/latest");
            let fetchData = await fetchString.json();
            document.getElementById("biharConfirmed").innerHTML = fetchData.data.regional[4].totalConfirmed;
            document.getElementById("biharDeaths").innerHTML = fetchData.data.regional[4].deaths;
            document.getElementById("biharRecovered").innerHTML = fetchData.data.regional[4].discharged;
        }
        async function fetchCoronaRohtas() {
            let fetchString = await fetch("https://api.covid19india.org/v3/data.json");
            let fetchData = await fetchString.json();
            document.getElementById("rohtasConfirmed").innerHTML = fetchData.BR.districts.Rohtas.total.confirmed;
            document.getElementById("rohtasDeaths").innerHTML = fetchData.BR.districts.Rohtas.total.deceased;
            document.getElementById("rohtasRecovered").innerHTML = fetchData.BR.districts.Rohtas.total.recovered;
        }
        function readTime() {
            let fetchedTime = new Date();
            document.getElementById("time").innerHTML = fetchedTime;
        }
        function refresh() {
            setInterval(readTime, 1000);
        }
        refresh();
    </script>
</body>
</html>